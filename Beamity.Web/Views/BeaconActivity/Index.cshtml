


@model IEnumerable<Beamity.Application.DTOs.BeaconActivityDTOs.ReadBeaconActivityDTO>
@{
    ViewData["Title"] = "View";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>View</h1>
<table class="table table-bordered table-hover text-center">
    <thead class="thead-light">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Beacon.Artifact.Room.Name)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.Beacon.Name)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.UserId)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.EnterTime)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ExitTime)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CreatedTime)
            </th>
            <th>
                Image
            </th>
            <th>Operations</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Beacon.Artifact.Room.Floor.Name)     @Html.DisplayFor(modelItem => item.Beacon.Artifact.Room.Name)
            </td>
            <td>
                
                @Html.DisplayFor(modelItem => item.Beacon.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.UserId)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.EnterTime)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ExitTime)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CreatedTime)
            </td>
            @*@<td>
            <button type="button" class="btn btn-warning detailShowModal m-1" data-id="@item.Id" data-name="@item.Name"
                    data-ctime="@item.CreatedTime" value="Details">
                <i class="fas fa-info-circle"></i> Details
            </button>
            <button type="button" class="btn btn-danger deleteShowModal m-1" data-name="@item.Name" data-id="@item.Id" value="Delete"><i class="far fa-trash-alt"></i> Delete</button>
            <button type="button" class="btn btn-primary relations m-1" data-name="@item.Name" data-id="@item.Id" value="Connections"><i class="fas fa-wifi"></i> Connections</button>
        </td>*@
        </tr>
        }
    </tbody>
</table>

<script>




    $(document).ready(function () {
        $('.detailShowModal').click(function () {
            $("#detailModal").modal('show');
            var options = {};
            options.url = "https://localhost:44327/api/BeaconActivity/GetAllBeaconActivities";
            var obj = {};
            obj.Id = locationId;
            debugger
            options.type = "POST";
            options.dataType = "json";
            options.contentType = "application/json";
            options.data = JSON.stringify(obj);
            options.success = function (data) {
                data.forEach(function (v) {
                    $("#EditRoom").append('<option value="' + v.id + '">' + v.name + '</option>');
                });
            };
            options.error = function (e) {
                alert(e.error);
            };
            $.ajax(options);
            var id = $(this).data('id');
            var name = $(this).data('name');
            var room = $(this).data('room');

            $("#editName").val(name);
            $("#EditRoom").val(room);

            $("#detailModalText").append('<input type="hidden" id="detailModalId" />');
            $('#detailModalId').val(id);
        });

</script>